<!doctype html>
<html lang="ko">
<head>

	<!-- page common -->
	<meta charset="utf-8">
	<meta http-equiv="Cache-Control" content="no-cache">
	<meta http-equiv="Pragma" content="no-cache">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<!-- //page common -->
	<!-- page unique -->
	<meta name="Description" content="설명들어감">
	<meta http-equiv="Last-Modified" content="">


	<!--[if lt IE 9]>
	<script src="/_ui/desktop/common/js/html5.js"></script>
	<![endif]-->
	<script type="text/javascript" src="/ruxitagentjs_ICA2SVfqru_10191200518082328.js" data-dtconfig="app=8b29b2d2fd2fb132|featureHash=ICA2SVfqru|rdnt=1|uxrgce=1|cuc=0bzsarpi|srms=1,1,,,|uxrgcm=100,25,300,3;100,25,300,3|dpvc=1|bismepl=2000|lastModification=1590004573363|dtVersion=10191200518082328|tp=500,50,0,1|uxdcw=1500|agentUri=/ruxitagentjs_ICA2SVfqru_10191200518082328.js|reportUrl=/rb_bf06412xlw|rid=RID_-264118491|rpid=1984102930|domain=amway.co.kr"></script><link rel="stylesheet" href="/_ui/desktop/common/css/academy_default.css">
	<script src="/_ui/desktop/common/js/jquery-1.8.3.min.js"></script>
	<script src="/_ui/desktop/common/js/pbCommon2.js"></script>
	<script src="/_ui/desktop/common/js/pbLayerPopup.js"></script>
	<script type="text/javascript" charset="UTF-8" src="/js/front.js"></script>
	<script type="text/javascript" charset="UTF-8" src="/js/json2.js"></script>
	<script type="text/javascript" charset="UTF-8" src="/js/json3.js"></script>
	<script type="text/javascript" charset="UTF-8" src="/js/jquery.form.js"></script>
	<script type="text/javascript" charset="UTF-8" src="/js/jquery.number.min.js"></script>
	<script type="text/javascript" charset="UTF-8" src="/js/jquery.popupWindow.js"></script>
	<script type="text/javascript" charset="UTF-8" src="/js/date.format.js"></script>
	<script type="text/javascript" charset="UTF-8" src="/js/jquery.history.js"></script>

	<script src="/_ui/desktop/common/js/pbCommonAcademy.js"></script>
	<script src="/js/adjustIframe.js"></script>
	<script src="/js/mustache.min.js"></script>

	<script type="text/javascript">
		var openLayerPopup = function(options){
			// 하나로 통일
			var targetId = "acdemyLayerPop";

			var default_value =  {
				targetId : "acdemyLayerPop"
				, width : 850
				, height : 600
				, maxHeight : 600
				, callback : false
				, params : ""
				, level : "1"
			};

			var opts = $.extend({}, default_value, options);

			opts.width = parseFloat(opts.width);
			opts.height = parseFloat(opts.height);
			opts.height = opts.height > opts.maxHeight ? opts.maxHeight : opts.height;

			var xindex = "10001";

			// modal
			var parentDoc = $(document).find('body');
			parentDoc.append('<div class="layerMask" id="layerMask" style="display:block;"></div>');

			// 기존 Layer 삭제
			$("#" + targetId).remove();
			$(document).find("body").append('<div id="' + targetId + '" tabindex="0"></div>');

			// Layer 레이아웃
			var obj = $(document).find('#'+ targetId);

			$.ajax({
				url: opts.url,
				type:'post',
				data : opts.params,
				success: function(data){
					// 열린 Ifrm ID 설정
					obj.html(data);
					$(window).scrollTop();
					setTimeout(function(){ $("#uiLayerPop_w02" ).attr("tabindex","0").focus(); }, 500);
					// 닫기 버튼 이벤트
					$(".btnPopClose").on("click", function(){
						$('#layerMask').remove();
						$('#acdemyLayerPop').remove();
					});
				},
				error: function(xhr,status,error){
					$('#layerMask').remove();
					$('#acdemyLayerPop').remove();
					alert("code:"+xhr.status);
				}
			});
		};

	</script>



	<script type="text/javascript">

		$(document.body).ready(function(){

			$(".btnBasicBL").bind("click", function(){
				roomInfoRsvCancel();
			});

			$(".btnBasicGL").on("click", function(){
				/*팝업창 닫기 */
				self.close();
			});
		});

		var roomInfoRsvCancel = function() {
			$('.btnBasicBL').unbind('click');

			var param = {
				rsvseq : $("input[name = rsvseq]").val()
				, roomseq : $("input[name = roomseq]").val()
				, standByNumber : $("input[name = standByNumber]").val()
				, typecode : $("input[name = typecode]").val()
			};
			$.ajaxCall({
				url: "/reservation/updateRoomCancelCodeAjax.do"
				, type : "POST"
				, data: $("#roomInfoForm").serialize()
				, success: function(data, textStatus, jqXHR){

					try{

						if(data.errorMsg) {
							alert(data.errorMsg);
							$(".btnBasicBL").bind("click", function(){
								roomInfoRsvCancel();
							});
							return;
						}

						/*--------------------부모창 새로고침---------------------------------------*/
						if($("#parentInfo").val() != "CAL"){

							$("input[name=purchasedate]").val($("input[name=transactiontime]").val().replace(/-/g,""));

							var frm = document.roomInfoForm
							var title = "parent2";
							var url =  "/reservation/roomInfoDetailList.do";

							window.opener.name = title; //객체의 레퍼런스가 아닌 스트링을 사용한 이름을 지정해 주어야 함.
							frm.target = title;

							frm.action = url;
							frm.method = "post";
							frm.submit();

						}else{
							/* 캘린더 부모 함수 호출 */
							var popYear = $("#popYear").val();
							var popMonth = $("#popMonth").val();
							var popDay = $("#popDay").val();

							window.opener.viewTypeCalendar(popYear, popMonth, popDay);
						}

						/*-----------------------------------------------------------------*/

						alert("예약이 취소되었습니다.");

						/*팝업창 닫기 */
						self.close();
						$(".btnBasicBL").bind("click", function(){
							roomInfoRsvCancel();
						});

					}catch(e){
						$(".btnBasicBL").bind("click", function(){
							roomInfoRsvCancel();
						});
					}

				},
				error: function( jqXHR, textStatus, errorThrown) {
					var mag = '처리도중 오류가 발생하였습니다.';
					alert(mag);
					$(".btnBasicBL").bind("click", function(){
						roomInfoRsvCancel();
					});
				}
			});
		}



	</script>
</head>
<body>
<form id="roomInfoForm" name="roomInfoForm" method="post" >

	<input type="hidden" name="interfaceChannel" value="WEB" >
	<input type="hidden" name="rsvseq" value="329930" >
	<input type="hidden" name="roomseq" value="2056" >
	<input type="hidden" name="standByNumber" value="0" >
	<input type="hidden" name="reservationDate" value="2020-05-22" >
	<input type="hidden" name="transactiontime" value="1589872683088" >
	<input type="hidden" name="purchasedate" value="2020-05-19" >
	<input type="hidden" name="virtualpurchasenumber" value="" >
	<input type="hidden" name="paymentamount" value="0" >


	<input type="hidden" name="typecode" value="F" >



	<!-- 캘린더 부모 함수 호출시 필요한 파라미터 -->
	<input type="hidden" name="parentInfo" id="parentInfo" value="" >
	<input type="hidden" name="popYear" id="popYear" value="" >
	<input type="hidden" name="popMonth" id="popMonth" value="" >
	<input type="hidden" name="popDay" id="popDay" value="" >
</form>
<div id="pbPopWrap">
	<header id="pbPopHeader">
		<h1><img src="/_ui/desktop/images/academy/h1_w020500121.gif" alt="예약취소" /></h1>
	</header>
	<a href="#" onclick="javascrip:self.close();" class="btnPopClose"><img src="/_ui/desktop/images/common/btn_close.gif" alt="window close" /></a>
	<section id="pbPopContent">

		<em class="listDotFS">예약을 취소하시겠습니까?</em>


		<!-- S : 2020-05-21 add -->
		<h2 class="pdtL"><img src="/_ui/desktop/images/academy/h2_w020500120.gif" alt="예약정보"></h2>
		<div class="reservInfoHeader">
			<div class="title"><span id="tempTypeName">시설종류 : OnAir예약</span><em>|</em><span>지역 : 강남ABC</span><em>|</em><span>ROOM명 : 온라인교육</span></div>
		</div>
		<table class="tblList lineLeft">
			<caption>예약정보 테이블</caption>
			<colgroup>
				<col style="width:30%" />
				<col style="width:40%" />
				<col style="width:auto" />
			</colgroup>
			<thead>
			<tr>
				<th scope="col">사용일</th>
				<th scope="col">사용시간</th>
				<th scope="col">결제금액</th>
			</tr>
			</thead>
			<tbody>

			<tr>
				<td>2020-05-22(금)</td>
				<td>세션2 (14:00~17:00)</td>
				<td>무료</td>
			</tr>
			<tr>
				<td>2020-05-22(금)</td>
				<td>세션1 (10:00~13:00)</td>
				<td>무료</td>
			</tr>
			</tbody>
		</table>
		<!-- E : 2020-05-21 add -->

		<!-- 무료예약인 경우 -->
		<div class="lineBox msgBox">
			<p class="textC">취소 시 패널티가 적용됩니다.</p>
		</div>



		<div class="btnWrapC">
			<input type="button" class="btnBasicGL" value="취소">
			<input type="button" class="btnBasicBL" value="확인" />
		</div>

	</section>
</div>
<!-- //content area | ### academy IFRAME End ### -->

</body>
</html>