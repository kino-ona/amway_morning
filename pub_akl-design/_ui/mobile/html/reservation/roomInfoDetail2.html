<!doctype html>
<html lang="ko">

<head>
	<!-- page common -->
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
	<meta http-equiv="Cache-Control" content="no-cache">
	<meta http-equiv="Pragma" content="no-cache">
	<meta name="referrer" content="unsafe-url">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<!-- //page common -->
	<!-- page unique -->
	<meta name="Description" content="설명들어감">
	<meta http-equiv="Last-Modified" content="">
	<meta id="metaTitle" property="og:title">
	<meta id="metaUrl" property="og:url">
	<meta id="metaContent" property="og:description">
	<meta id="metaImage" property="og:image">

	<meta content="website" property="og:type">
	<meta content="Amway Site" property="og:site_name">
	<!-- //page unique -->
	<title>Amway Korea | 시설예약현황확인</title>
	<!--[if lt IE 9]>
<script src="/_ui/mobile/common/js/html5.js"></script>
<script src="/_ui/mobile/common/js/ie.print.js"></script>
<![endif]-->
	<link rel="stylesheet" href="/_ui/mobile/common/css/academy_default.css">
	<link rel="stylesheet" href="/_ui/mobile/common/css/default.css">
	<link rel="stylesheet" href="/_ui/mobile/common/css/main.css">
	<link rel="stylesheet" href="/_ui/mobile/common/css/swiper.min.css"> <!-- 20220830 css 추가 -->
	<link rel="stylesheet" href="/_ui/mobile/common/css/swiper-bundle.min.css"> <!-- 20220830 css 추가 -->

	<script type="text/javascript" async="" charset="utf-8" id="utag_69"
		src="//cdn.heapanalytics.com/js/heap-121691346.js"></script>
	<script src="//tags.tiqcdn.com/utag/amway/kr-hybris/dev/utag.js" type="text/javascript" async=""></script>
	<script src="/_ui/mobile/common/js/jquery-1.8.3.min.js"></script>
	<script src="/_ui/mobile/common/js/pbLayerPopup.js"></script>
	<script src="/_ui/mobile/common/js/pbCommon.js"></script>

	<script type="text/javascript" charset="UTF-8" src="/js/front.js"></script>
	<script type="text/javascript" charset="UTF-8" src="/js/json2.js"></script>
	<script type="text/javascript" charset="UTF-8" src="/js/json3.js"></script>
	<script type="text/javascript" charset="UTF-8" src="/js/jquery.form.js"></script>
	<script type="text/javascript" charset="UTF-8" src="/js/jquery.number.min.js"></script>
	<script type="text/javascript" charset="UTF-8" src="/js/jquery.popupWindow.js"></script>
	<script type="text/javascript" charset="UTF-8" src="/js/date.format.js"></script>
	<script type="text/javascript" charset="UTF-8" src="/js/jquery.history.js"></script>

	<script src="/_ui/mobile/common/js/owl.carousel.js"></script>
	<script src="/_ui/mobile/common/js/apps/kakao.link.js"></script>
	<script src="https://developers.kakao.com/sdk/js/kakao.min.js"></script>
	<script src="/_ui/mobile/common/js/jquery.event.drag-1.5.min.js"></script>
	<script src="/_ui/mobile/common/js/jquery.touchSlider.js"></script>
	<script src="/_ui/mobile/common/js/jquery.touchSlider2.js"></script>
	<script src="/_ui/mobile/common/js/swiper.min.js"></script> <!-- 20220830 js 추가 -->

	<script src="/_ui/mobile/common/js/pbCommonAcademyReservationSecond.js"></script>
	<script src="/_ui/mobile/common/js/pbCommon.js"></script>
	<script src="/_ui/mobile/common/js/reservationSns.js"></script>
	<script src="/_ui/mobile/common/js/reservation_tab.js"></script>
	<script src="https://js.tosspayments.com/v1/connectpay"></script>


	<script type="text/javascript" charset="UTF-8" src="/js/front_reservation.js"></script>

	<script src="/js/mustache.min.js"></script>
	<script src="/js/stringUtility.js"></script>

	<script type="text/javascript">
		//window.utag_cfg_ovrd = {noview : true};
	</script>
	<style>
		input {
			height: 31px;
		}
	</style>
	<script type="text/javascript">
		var browser;

		// 모바일 가로/세로 resize
		$(window).on("orientationchange", function (event) {
			//		setTimeout(function(){ abnkorea_resize(); }, 500);
		});

		// ap안내 아이프레임 높이 조정
		function abnkoreaApInfoPop_resize() {

			var tempHeight = 0;

			if ($("#uiLayerPop_apInfo").height() > 900) {
				tempHeight = 0;
			} else {
				tempHeight = 900 - $("#uiLayerPop_apInfo").height();
			}


			var iHeight = $("#uiLayerPop_apInfo").height() + tempHeight; //"1320"//

			var isResize = false;
			if (iHeight == null) {
				iHeight = $(document).height();
			}
			try {

				window.parent.postMessage(iHeight, "*");
				isResize = true;

				$("#layerMask").css("display", "none");
			} catch (e) {
				isResize = false;
			}
			if (!isResize) {
				try {} catch (e) {}
			}

		}

		// ap안내 아이프레임 높이 조정
		function abnkoreaConfirmPop_resize() {
			var iHeight = $("#pbContent").height() + 200;
			var isResize = false;
			if (iHeight == null) {
				iHeight = $(document).height();
			}
			try {
				window.parent.postMessage(iHeight, "*");
				isResize = true;
			} catch (e) {
				isResize = false;
			}
			if (!isResize) {
				try {} catch (e) {}
			}
		}


		// 아이프레임 높이 조정
		function abnkoreaCard_resize() {
			var iHeight = $("#pbContent").height() + 200;
			var isResize = false;
			if (iHeight == null) {
				iHeight = $(document).height();
			}
			try {
				window.parent.postMessage(iHeight, "*");
				isResize = true;
			} catch (e) {
				isResize = false;
			}
			if (!isResize) {
				try {} catch (e) {}
			}
		}

		// 아이프레임 높이 조정
		function rsvConfirmPop_resize() {
			$("body").scrollTop(0);
			//alert($('#uiLayerPop_confirm').length);
			//$('#uiLayerPop_confirm').eq(0).scrollIntoView(true);
			$('#uiLayerPop_confirm').each(function () {
				this.scrollIntoView(true);
			});
		}
	</script>
	<script type="text/javascript">
		var openLayerPopup = function (options) {
			// 하나로 통일
			var targetId = "acdemyLayerPop";

			var default_value = {
				targetId: "acdemyLayerPop",
				width: 850,
				height: 600,
				maxHeight: 600,
				callback: false,
				params: "",
				level: "1"
			};

			var opts = $.extend({}, default_value, options);

			opts.width = parseFloat(opts.width);
			opts.height = parseFloat(opts.height);
			opts.height = opts.height > opts.maxHeight ? opts.maxHeight : opts.height;

			var xindex = "10001";

			// modal
			var parentDoc = $(document).find('body');
			parentDoc.append('<div class="layerMask" id="layerMask" style="display:block;"></div>');

			// 기존 Layer 삭제
			$("#" + targetId).remove();
			$(document).find("body").append('<div id="' + targetId + '" tabindex="-1"></div>');

			// Layer 레이아웃
			var obj = $(document).find('#' + targetId);

			$.ajax({
				url: opts.url,
				type: 'post',
				data: opts.params,
				success: function (data) {
					// 열린 Ifrm ID 설정
					obj.html(data);
					$(window).scrollTop();
					setTimeout(function () {
						$("#uiLayerPop_mTFDetail").attr("tabindex", "0").focus();
					}, 500);
					// 닫기 버튼 이벤트
					$(".btnPopClose").on("click", function () {
						$('#layerMask').remove();
						$('#acdemyLayerPop').remove();
					});
				},
				error: function (xhr, status, error) {
					$('#layerMask').remove();
					$('#acdemyLayerPop').remove();
					alert("code:" + xhr.status);
				}
			});
		};
	</script>
	<script
		src="//assets.adobedtm.com/82aecb95e0b4e7a4cd5816c4c5d4fb1902bdbcf5/satelliteLib-a1be4b37db6eea7c35859ed88c870d1b39caf70d-staging.js">
	</script>
	<script type="text/javascript">
		/* 뒤로가기 제어 */
		History.pushState(null, null, location.href);
		History.Adapter.bind(window, 'statechange', function () {
			var state = History.getState();
			history.go(1);
		});

		$(document.body).ready(function () {

			var system_type = "DEV";
			if (system_type == "PROD") {
				//send tagging information
				(function (a, b, c, d) {
					a = '//tags.tiqcdn.com/utag/amway/kr-hybris/prod/utag.js';
					b = document;
					c = 'script';
					d = b.createElement(c);
					d.src = a;
					d.type = 'text/java' + c;
					d.async = true;
					a = b.getElementsByTagName(c)[0];
					a.parentNode.insertBefore(d, a);
				})();
			} else {
				//send tagging information
				(function (a, b, c, d) {
					a = '//tags.tiqcdn.com/utag/amway/kr-hybris/dev/utag.js';
					b = document;
					c = 'script';
					d = b.createElement(c);
					d.src = a;
					d.type = 'text/java' + c;
					d.async = true;
					a = b.getElementsByTagName(c)[0];
					a.parentNode.insertBefore(d, a);
				})();
			}

			$(".btnBasicBXL").on("click", function () {
				location.href = "/reservation/roomInfoList.do";
			});

			setTimeout(function () {
				abnkorea_resize();
			}, 500);

			/* move function */
			/*
			var $pos = $("#pbContent");
			var iframeTop = parent.$("#IframeComponent").offset().top
			parent.$('html, body').animate({
			scrollTop:$pos.offset().top + iframeTop
			}, 500);
			*/
			$("#fn_roomInfoRsvCancel").bind('click', function () {
				roomInfoRsvCancel();
			});

			$("#allCancelCheck").on("click", function () {
				if ($("input:checkbox[name=allCancelCheck]").is(":checked") == true) {
					$("input:checkbox[name=cancelCheck]").each(function () {
						this.checked = true;
					});
				} else {
					$("input:checkbox[name=cancelCheck]").each(function () {
						this.checked = false;
					});
				}
			});

		});

		function roomInfoRsvCancelDataMulti(obj) {

			var checkCnt = 0;
			var cancelYn = "Y";
			var rsvseq = "";
			var roomseq = "";
			var standByNumber = "";
			var typecode = "";

			if ($("input:checkbox[name=cancelCheck]:checked").length < 1) {
				alert("취소할 예약을 선택해주세요!");
				return false;
			} else {
				$("input:checkbox[name=cancelCheck]").each(function (index, item) {
					if ($("input:checkbox[name=cancelCheck]:checked").eq(index)) {
						if ($("input[name='h_cancelyn']").eq(index).val() == "N") {
							cancelYn = "N";
						}
					}
				});


				if (cancelYn == "N") {
					alert("예약 취소는 예약 완료 후 5분뒤에 가능합니다 \n 5분뒤 다시 조회후 취소해주세요");
					cancelClosePop();
					return false;
				} else {

					layerPopupOpen(obj);

					$("input:checkbox[name=cancelCheck]").each(function (index, item) {
						if ($("input:checkbox[name=cancelCheck]").eq(index).is(":checked") == true) {
							rsvseq = rsvseq + "," + $("input[name = h_rsvseq]").eq(index).val();
							roomseq = roomseq + "," + $("input[name = h_roomseq]").eq(index).val();
							standByNumber = standByNumber + "," + $("input[name = h_standByNumber]").eq(index).val();
							typecode = typecode + "," + $("input[name = h_typecode]").eq(index).val();
						}
					});

					rsvseq = rsvseq.substring(1, rsvseq.length);
					roomseq = roomseq.substring(1, roomseq.length);
					standByNumber = standByNumber.substring(1, standByNumber.length);
					typecode = typecode.substring(1, typecode.length);

					var param = {
						"rsvseq": rsvseq,
						"roomseq": roomseq,
						"standByNumber": standByNumber,
						"typecode": typecode
					}

					/* 해당 패널티 정보 조회 */
					$.ajaxCall({
						url: "/reservation/roomInfoRsvCancelPop.do",
						type: "POST",
						data: param,
						success: function (data, textStatus, jqXHR) {

							var reservationInfo = data.reservationInfo;
							var applytype = data.roomInfoRsvCancelPenalty

							if (reservationInfo.length > 0) {
								$("#t_PpName").empty();
								$("#t_PpName").append(reservationInfo[0].ppname);
								$("#t_RoomName").empty();
								$("#t_RoomName").append(reservationInfo[0].roomname);
								$("#t_RsvName").empty();
								$("#t_RsvName").append(reservationInfo[0].typename);
							}
							var innerHtmls = "";
							var cancelHtml = "";

							$(".rsvDetailInfo").remove();

							for (var i = 0; i < reservationInfo.length; i++) {
								innerHtmls = innerHtmls + "<dl class=\"tblBizroomState rsvDetailInfo\">";
								innerHtmls = innerHtmls + "<dt><span class=\"block\">사용일자</span>";
								innerHtmls = innerHtmls + reservationInfo[i].reservationDate + " (" +
									reservationInfo[i].reservationweekday + ") " + reservationInfo[i].sessionname;
								innerHtmls = innerHtmls + " (" + reservationInfo[i].startDateTime.substring(0,
									2) + ":" + reservationInfo[i].startDateTime.substring(2, 4) + " ~ " +
									reservationInfo[i].endDateTime.substring(0, 2) + ":" + reservationInfo[i]
									.endDateTime.substring(2, 4) + ") </dt>";
								if (reservationInfo[i].paymentamount == "0") {
									innerHtmls = innerHtmls + "<dd><p>결제금액 : 무료</p>";
								} else {
									if (applytype[i].typecode == "P") {
										var t_paymentamount = reservationInfo[i].paymentamount;
										var t_applytypevalue = applytype[i].applytypevalue;
										var refundAmount = t_paymentamount * t_applytypevalue / 100;
										var refundAmounts = t_paymentamount - refundAmount;

										innerHtmls = innerHtmls + "<dd><span class=\"throught\"><p>결제금액 : " +
											reservationInfo[i].paymentamount + "</p></span><p>환불예정금액 : " +
											refundAmounts + "</p>";
									} else {
										innerHtmls = innerHtmls + "<dd><p>결제금액 : " + reservationInfo[i]
											.paymentamount + "</p>";
									}
								}
								innerHtmls = innerHtmls + "<p>상태 : " + reservationInfo[i].paymentstatusname +
									"</p></dd>";
								innerHtmls = innerHtmls + "</dl>";

								cancelHtml = cancelHtml + "<input type=\"hidden\" name=\"rsvseq\" value=\"" +
									reservationInfo[i].rsvseq + "\">";
								cancelHtml = cancelHtml + "<input type=\"hidden\" name=\"roomseq\" value=\"" +
									reservationInfo[i].roomseq + "\">";
								cancelHtml = cancelHtml +
									"<input type=\"hidden\" name=\"standByNumber\" value=\"" + reservationInfo[i]
									.standByNumber + "\">";
								if (!isNull(applytype[i].applytypevalue)) {
									cancelHtml = cancelHtml +
										"<input type=\"hidden\" name=\"typecode\" value=\"" + applytype[i]
										.typecode + "\">";
								} else {
									cancelHtml = cancelHtml +
										"<input type=\"hidden\" name=\"typecode\" value=\"N\">";
								}
								cancelHtml = cancelHtml +
									"<input type=\"hidden\" name=\"paymentamount\" value=\"" + reservationInfo[i]
									.paymentamount + "\">";
								cancelHtml = cancelHtml +
									"<input type=\"hidden\" name=\"reservationDate\" value=\"" + reservationInfo[
										i].reservationDate + "\">";
								cancelHtml = cancelHtml +
									"<input type=\"hidden\" name=\"purchasedate\" value=\"" + reservationInfo[i]
									.purchasedate + "\">";
								cancelHtml = cancelHtml +
									"<input type=\"hidden\" name=\"virtualpurchasenumber\" value=\"" +
									reservationInfo[i].virtualpurchasenumber + "\">";
								cancelHtml = cancelHtml +
									"<input type=\"hidden\" name=\"interfaceChannel\" value=\"WEB\">";
							}

							$("#popInfo").after(innerHtmls);

							$("#h_roomInfoForm").empty();
							$("#h_roomInfoForm").append(cancelHtml);

							$(".cancelWrap").empty();
							$(".cancelWrap").append("<p>예약을 취소하시겠습니까?</p>");
							for (var i = 0; i < applytype.length; i++) {

								if (!isNull(applytype[i].applytypevalue)) {
									if (applytype[i].typecode == "P") {
										$(".cancelWrap").append(
											"<div class=\"lineBox msgBox\"><p class=\"textC\">[" +
											reservationInfo[i].reservationDate +
											"] 취소 시 결제 금액의<font color=\"red\"><span>" + applytype[i]
											.applytypevalue +
											"</span>%의 취소 수수료 </font>제외후 환불 처리됩니다.</p></div>");
									} else if (applytype[i].typecode == "F") {
										$(".cancelWrap").append(
											"<div class=\"lineBox msgBox\"><p class=\"textC\">[" +
											reservationInfo[i].reservationDate +
											"] 취소 시 패널티가 적용됩니다.</p></div>");
									} else if (applytype[i].typecode == "C") {
										$(".cancelWrap").append(
											"<div class=\"lineBox msgBox\"><p class=\"textC\">[" +
											reservationInfo[i].reservationDate +
											"] 취소 시 패널티가 적용됩니다.</p><p class=\"textC\">사용 예정일  7일 이내 취소 시 패널티가  적용됩니다.</p><p class=\"textC\">패널티 :  퀸룸 무료 임대 1회 사용한 것으로 적용됩니다. </p></div>"
											);
									}
								}
							}
						},
						error: function (jqXHR, textStatus, errorThrown) {
							alert("처리도중 오류가 발생하였습니다.");
						}
					});
				}
			}
		}




		/* 예약 취소 데이터 정리 */
		function roomInfoRsvCancelData(rsvseq, roomseq, standByNumber, typecode, paymentamount, reservationDate, purchasedate,
			virtualpurchasenumber, cancelYn) {

			if (cancelYn == "N") {
				alert("예약 취소는 예약 완료 후 5분뒤에 가능합니다 \n 5분뒤 다시 조회후 취소해주세요");
				cancelClosePop();
				return false;
			}

			/* 해당 결제 적용 패널티 조회 */

			$("input[name = rsvseq]").val("");
			$("input[name = rsvseq]").val(rsvseq);

			$("input[name = roomseq]").val("");
			$("input[name = roomseq]").val(roomseq);

			$("input[name = standByNumber]").val("");
			$("input[name = standByNumber]").val(standByNumber);

			$("input[name = typecode]").val("");
			$("input[name = typecode]").val(typecode);

			var param = {
				"rsvseq": rsvseq,
				"roomseq": roomseq,
				"standByNumber": standByNumber,
				"typecode": typecode
			}

			/* 해당 패널티 정보 조회 */
			$.ajaxCall({
				url: "/reservation/roomInfoRsvCancelPop.do",
				type: "POST",
				data: param,
				success: function (data, textStatus, jqXHR) {


					var reservationInfo = data.reservationInfo;
					var applytype = data.roomInfoRsvCancelPenalty

					if (reservationInfo.length > 0) {
						$("#t_PpName").empty();
						$("#t_PpName").append(reservationInfo[0].ppname);
						$("#t_RoomName").empty();
						$("#t_RoomName").append(reservationInfo[0].roomname);
						$("#t_RsvName").empty();
						$("#t_RsvName").append(reservationInfo[0].typename);
					}
					var innerHtmls = "";
					var cancelHtml = "";

					$(".rsvDetailInfo").remove();

					for (var i = 0; i < reservationInfo.length; i++) {
						innerHtmls = innerHtmls + "<dl class=\"tblBizroomState rsvDetailInfo\">";
						innerHtmls = innerHtmls + "<dt><span class=\"block\">사용일자</span>";
						innerHtmls = innerHtmls + reservationInfo[i].reservationDate + " (" + reservationInfo[i]
							.reservationweekday + ") " + reservationInfo[i].sessionname;
						innerHtmls = innerHtmls + " (" + reservationInfo[i].startDateTime.substring(0, 2) + ":" +
							reservationInfo[i].startDateTime.substring(2, 4) + " ~ " + reservationInfo[i]
							.endDateTime.substring(0, 2) + ":" + reservationInfo[i].endDateTime.substring(2, 4) +
							") </dt>";

						if (reservationInfo[i].paymentamount == "0") {
							innerHtmls = innerHtmls + "<dd><p>결제금액 : 무료</p>";
						} else {
							if (applytype[i].typecode == "P") {
								var t_paymentamount = reservationInfo[i].paymentamount;
								var t_applytypevalue = applytype[i].applytypevalue;
								var refundAmount = t_paymentamount * t_applytypevalue / 100;
								var refundAmounts = t_paymentamount - refundAmount;

								innerHtmls = innerHtmls + "<dd><span class=\"throught\"><p>결제금액 : " +
									reservationInfo[i].paymentamount + "</p></span><p>환불예정금액 : " + refundAmounts +
									"</p>";
							} else {
								innerHtmls = innerHtmls + "<dd><p>결제금액 : " + reservationInfo[i].paymentamount +
									"</p>";
							}
						}
						innerHtmls = innerHtmls + "<p>상태 : " + reservationInfo[i].paymentstatusname + "</p></dd>";
						innerHtmls = innerHtmls + "</dl>";

						cancelHtml = cancelHtml + "<input type=\"hidden\" name=\"rsvseq\" value=\"" +
							reservationInfo[i].rsvseq + "\">";
						cancelHtml = cancelHtml + "<input type=\"hidden\" name=\"roomseq\" value=\"" +
							reservationInfo[i].roomseq + "\">";
						cancelHtml = cancelHtml + "<input type=\"hidden\" name=\"standByNumber\" value=\"" +
							reservationInfo[i].standByNumber + "\">";
						if (!isNull(applytype[i].applytypevalue)) {
							cancelHtml = cancelHtml + "<input type=\"hidden\" name=\"typecode\" value=\"" +
								applytype[i].typecode + "\">";
						} else {
							cancelHtml = cancelHtml + "<input type=\"hidden\" name=\"typecode\" value=\"N\">";
						}
						cancelHtml = cancelHtml + "<input type=\"hidden\" name=\"paymentamount\" value=\"" +
							reservationInfo[i].paymentamount + "\">";
						cancelHtml = cancelHtml + "<input type=\"hidden\" name=\"reservationDate\" value=\"" +
							reservationInfo[i].reservationDate + "\">";
						cancelHtml = cancelHtml + "<input type=\"hidden\" name=\"purchasedate\" value=\"" +
							reservationInfo[i].purchasedate + "\">";
						cancelHtml = cancelHtml +
							"<input type=\"hidden\" name=\"virtualpurchasenumber\" value=\"" + reservationInfo[i]
							.virtualpurchasenumber + "\">";
						cancelHtml = cancelHtml +
							"<input type=\"hidden\" name=\"interfaceChannel\" value=\"WEB\">";
					}

					$("#popInfo").after(innerHtmls);

					$("#h_roomInfoForm").empty();
					$("#h_roomInfoForm").append(cancelHtml);


					$(".cancelWrap").empty();
					$(".cancelWrap").append("<p>예약을 취소하시겠습니까?</p>");
					for (var i = 0; i < applytype.length; i++) {

						if (!isNull(applytype[i].applytypevalue)) {
							if (applytype[i].typecode == "P") {
								$(".cancelWrap").append("<div class=\"lineBox msgBox\"><p class=\"textC\">[" +
									reservationInfo[i].reservationDate +
									"] 취소 시 결제 금액의<font color=\"red\"><span>" + applytype[i].applytypevalue +
									"</span>%의 취소 수수료 </font>제외후 환불 처리됩니다.</p></div>");
							} else if (applytype[i].typecode == "F") {
								$(".cancelWrap").append("<div class=\"lineBox msgBox\"><p class=\"textC\">[" +
									reservationInfo[i].reservationDate + "] 취소 시 패널티가 적용됩니다.</p></div>");
							} else if (applytype[i].typecode == "C") {
								$(".cancelWrap").append("<div class=\"lineBox msgBox\"><p class=\"textC\">[" +
									reservationInfo[i].reservationDate +
									"] 취소 시 패널티가 적용됩니다.</p><p class=\"textC\">사용 예정일  7일 이내 취소 시 패널티가  적용됩니다.</p><p class=\"textC\">패널티 :  퀸룸 무료 임대 1회 사용한 것으로 적용됩니다. </p></div>"
									);
							}
						}
					}
				},
				error: function (jqXHR, textStatus, errorThrown) {
					alert("처리도중 오류가 발생하였습니다.");
				}
			});
		}

		/* 예약 취소 */
		var roomInfoRsvCancel = function () {
			$("#fn_roomInfoRsvCancel").unbind('click');

			$.ajax({
				url: "/reservation/updateRoomCancelCodeAjax.do",
				type: "POST",
				data: $("#h_roomInfoForm").serialize(),
				success: function (data, textStatus, jqXHR) {

					cancelClosePop();

					$("input[name = transactiontime]").val(data.reservationInfo.transactiontime);
					$("input[name = purchasedate]").val($("input[name = transactiontime]").val());

					$("#roomInfoForm").attr("action", "/reservation/roomInfoDetailList.do");
					$("#roomInfoForm").submit();

					if (data.errorMsg) {
						alert(data.errorMsg);
					} else {
						alert("예약이 취소되었습니다.");
					}

					$('#fn_roomInfoRsvCancel').bind('click', function () {
						roomInfoRsvCancel();
					});

				},
				error: function (jqXHR, textStatus, errorThrown) {
					alert("처리도중 오류가 발생하였습니다.");

					$('#fn_roomInfoRsvCancel').bind('click', function () {
						roomInfoRsvCancel();
					});
				}
			});

		}


		/* 환불 내역 확인 팝업 */
		function roomInfoRsvPaybackInfo(rsvseq) {

			var param = {
				"rsvseq": rsvseq
			};

			$.ajax({
				url: "/reservation/roomInfoRsvPaybackInfoPop.do",
				type: "POST",
				data: param,
				success: function (data, textStatus, jqXHR) {
					var paybackInfo = data.roomInfoRsvPaybackInfo;

					$("#account").empty();
					$("#paymentdate").empty();
					$("#reservationDate").empty();
					$("#typename").empty();
					$("#ppname").empty();
					$("#session").empty();
					$("#canceldatetime").empty();
					$("#applytypevalue").empty();
					$("#paymentamount").empty();
					$("#refundcharge").empty();
					$("#refundamount").empty();
					$("#virtualpurchasenumber").empty();

					$("#account").append(paybackInfo.account);
					$("#paymentdate").append(paybackInfo.paymentdate);
					$("#reservationDate").append(paybackInfo.reservationDate);
					$("#typename").append(paybackInfo.typename);
					$("#ppname").append(paybackInfo.ppname + " / " + paybackInfo.roomname);
					$("#session").append(paybackInfo.sessionname +
						" (" + paybackInfo.startDateTime.substring(0, 2) +
						":" + paybackInfo.startDateTime.substring(2, 4) +
						"~" + paybackInfo.endDateTime.substring(0, 2) +
						":" + paybackInfo.endDateTime.substring(2, 4) + ")");
					$("#canceldatetime").append(paybackInfo.canceldatetime);
					$("#applytypevalue").append("결제금액 기준 " + paybackInfo.applytypevalue + "% 취소 수수료 제외 후 환불");
					$("#paymentamount").append(setComma(paybackInfo.paymentamount) + "원");
					$("#refundcharge").append(setComma(paybackInfo.refundcharge) + "원");
					$("#refundamount").append(setComma(paybackInfo.refundamount) + "원");
					$("#virtualpurchasenumber").append(paybackInfo.virtualpurchasenumber + " 신용");

				},
				error: function (jqXHR, textStatus, errorThrown) {
					alert("처리도중 오류가 발생하였습니다.");
				}
			});
		}

		/* 레이어 팝업 닫기 */
		function cancelClosePop() {
			$("#uiLayerPop_cancel").hide();
			$("#layerMask").remove();

			$('html, body').css({
				overflowX: '',
				overflowY: ''
			});

			setTimeout(function () {
				abnkorea_resize();
			}, 500);
			$("#h_roomInfoForm").empty();
		}

		function cancelViewClosePop() {
			$("#uiLayerPop_cancelView").hide();
			$("#layerMask").remove();

			$('html, body').css({
				overflowX: '',
				overflowY: ''
			});

			setTimeout(function () {
				abnkorea_resize();
			}, 500);
		}

		function tempSharing(url, sns) {

			var title = "Amway - 교육장예약";
			var content = ""

			$("span[name=snsText]").each(function (index) {
				content = content + $.trim($(this).text().trim().replace(/[\t\n]+/g, '')) + "\n";
			});

			if (sns == "facebook") {
				var tmpUrl = url + "?reservation=" + $("#transactionTime").val();
			} else {
				var tmpUrl = url;
			}

			sharing(tmpUrl, title, sns, content);
		}
	</script>
	<script
		src="https://assets.adobedtm.com/82aecb95e0b4e7a4cd5816c4c5d4fb1902bdbcf5/s-code-contents-afd4986fee5b6ac60664a557386d8f9de7d18abf.js">
	</script>
	<script type="text/javascript" async="" charset="utf-8" id="utag_amway.kr-hybris_41"
		src="//tags.tiqcdn.com/utag/tiqapp/utag.currency.js?utv=ut4.45.202302151837"></script>
	<script type="text/javascript" async="" charset="utf-8" id="utag_amway.kr-hybris_69"
		src="//tags.tiqcdn.com/utag/amway/kr-hybris/dev/utag.69.js?utv=ut4.45.202302130550"></script>
</head>












<!-- //Adobe Analytics Header 호출 include -->




<!-- analytics AI staging (TBD) -->







<body>
	<form id="h_roomInfoForm" name="h_roomInfoForm" method="post">
	</form>

	<form id="roomInfoForm" name="roomInfoForm" method="post">
		<input type="hidden" name="interfaceChannel" value="WEB">
		<input type="hidden" name="rsvseq">
		<input type="hidden" name="roomseq" value="1987">
		<input type="hidden" name="standByNumber">
		<input type="hidden" name="reservationDate" value="20230331">
		<input type="hidden" name="purchasedate" value="1678156031117">
		<input type="hidden" name="transactiontime" id="transactionTime" value="1678156031117">
		<input type="hidden" name="reservationDate">
		<input type="hidden" name="virtualpurchasenumber" value="180-800309834">
		<input type="hidden" name="typecode">
		<input type="hidden" name="tempTypeName">
		<input type="hidden" name="cardName">
		<input type="hidden" name="paymentamount">
		<input type="hidden" name="paymentamount">
	</form>

	<!-- container -->
	<div id="pbContainer">
		<!-- content -->
		<section id="pbContent" class="bizroom">

			<div class="pbLayerPopup new">
				<div class="pbLayerHeader">
					<strong>시설예약</strong>
				</div>
				<div class="pbLayerContent">
					<p><a class="link-btn" href="/reservation/expMeasureForm.do?menuCode=4">체험예약</a></p>
					<div class="selcWrap mgbL">
						<div class="selectArea sizeM colorW">
							<a href="/reservation/roomForm.do?menuCode=1">교육장 예약</a>
							<a href="/reservation/roomForm.do?menuCode=2">퀸룸/파티룸 예약</a>
							<a href="/reservation/roomForm.do?menuCode=3">비즈룸 예약</a>
							<a href="/reservation/roomForm.do?menuCode=8">25센트라이드 예약</a>
							<a href="#" class="active">시설예약 현황</a>
						</div>
						<!--
<div class="selectArea sizeL colorW">
<a href="/reservation/roomOutBoundForm.do">외부임대 교육장 안내</a>
</div>
//-->
					</div>
					<div class="tab-conts" id="business1" style="display:block;">
						<div>

							<div class="topBox">
								<dl>
									<dt>예약자</dt>
									<dd>7480000 이병헌</dd>
									<dt>등록일자</dt>
									<dd>2023-03-07</dd>










									<dt>결제방법</dt>

									<dd>신용카드</dd>



									<dt>카드종류</dt>
									<dd id="tempCardName">삼성MASTER</dd>
									<dt>카드번호</dt>
									<dd>5188-31**-****-598*</dd>
									<dt>결제금액</dt>
									<dd>880,000원</dd>

								</dl>
							</div>

							<div class="titP mgtM">예약정보</div>

							<div class="topBox mgbS">
								<dl>
									<dt>시설종류</dt>
									<dd>교육장</dd>
									<dt>지역</dt>
									<dd>분당ABC</dd>
									<dt>ROOM명</dt>
									<dd>교육장 오디토리움</dd>
								</dl>
							</div><!-- //.topBox -->

							<div class="choice-area">
								<span class="box_check"></span>
								<a href="#uiLayerPop_cancel" class="btnTbl"
									onclick="roomInfoRsvCancelDataMulti(this)">선택 예약취소</a>
							</div>


							<div class="stateWrap">
								<!-- S : 20230307 아카데미 예약 현황 확인 모바일 화면 수정 -->
								<div class="tblBizroomState with-check">
									<div class="with-check-box01 with-check-box01_add">
										<div class="check-box">
											<span class="box_check"><input type="checkbox" name="cancelCheck"></span>
											<input type="hidden" name="h_rsvseq" value="333246">
											<input type="hidden" name="h_roomseq" value="1987">
											<input type="hidden" name="h_standByNumber" value="0">
											<input type="hidden" name="h_typecode" value="N">
											<input type="hidden" name="h_cancelyn" value="Y">
										</div>
										<ul>
											<li>사용일자</li>
											<li>2023-03-31 (금) 세션1 (10:00~13:00)</li>
											<li><a href="#uiLayerPop_cancel" class="btnTbl" onclick="layerPopupOpen(this);roomInfoRsvCancelData('333246', '1987', '0', 'N', '440000', '2023-03-31', '2023-03-07', '180-800309834', 'Y');return false;">예약취소</a></li>
										</ul>
									</div>
									<div class="with-check-box02">
										<p>결제금액 : 440,000원</p>
										<p>상태 : 결제완료</p>
									</div>
								</div>

								<div class="tblBizroomState with-check">
									<div class="with-check-box01 with-check-box01_add">
										<div class="check-box">
											<span class="box_check"><input type="checkbox" name="cancelCheck"></span>
											<input type="hidden" name="h_rsvseq" value="333246">
											<input type="hidden" name="h_roomseq" value="1987">
											<input type="hidden" name="h_standByNumber" value="0">
											<input type="hidden" name="h_typecode" value="N">
											<input type="hidden" name="h_cancelyn" value="Y">
										</div>
										<ul>
											<li>사용일자</li>
											<li>2023-03-29 (수) 세션1 (10:00~13:00)</li>
											<li><a href="#uiLayerPop_cancel" class="btnTbl" onclick="layerPopupOpen(this);roomInfoRsvCancelData('333245', '1987', '0', 'N', '440000', '2023-03-29', '2023-03-07', '180-800309834', 'Y');return false;">예약취소</a></li>
										</ul>
									</div>
									<div class="with-check-box02">
										<p>결제금액 : 440,000원</p>
										<p>상태 : 결제완료</p>
									</div>
								</div>
								<!-- E : 20230307 아카데미 예약 현황 확인 모바일 화면 수정 -->
								
								<!-- S : 20230307 아카데미 예약 현황 확인 모바일 화면 수정으로 기존 마크업 삭제 -->
								<!-- <dl class="tblBizroomState with-check">
									<dt>
										<span class="box_check"><input type="checkbox" name="cancelCheck"></span>
										<input type="hidden" name="h_rsvseq" value="333246">
										<input type="hidden" name="h_roomseq" value="1987">
										<input type="hidden" name="h_standByNumber" value="0">
										<input type="hidden" name="h_typecode" value="N">
										<input type="hidden" name="h_cancelyn" value="Y">
										<span class="block">사용일자</span>
										2023-03-31 (금) 세션1 (10:00~13:00)
										<a href="#uiLayerPop_cancel" class="btnTbl" onclick="layerPopupOpen(this);roomInfoRsvCancelData('333246', '1987', '0', 'N', '440000', '2023-03-31', '2023-03-07', '180-800309834', 'Y');return false;">예약취소</a>
									</dt>
									<dd>
										<p>결제금액 : 440,000원</p>
										<p>상태 : 결제완료</p>
									</dd>
								</dl>
								<span name="snsText" style="display:none">
									<p>■ 분당ABC (교육장) 2023-03-31(금)|10:00 ~13:00|</p>
								</span>

								<dl class="tblBizroomState with-check">
									<dt>
										<span class="box_check"><input type="checkbox" name="cancelCheck"></span>
										<input type="hidden" name="h_rsvseq" value="333245">
										<input type="hidden" name="h_roomseq" value="1987">
										<input type="hidden" name="h_standByNumber" value="0">
										<input type="hidden" name="h_typecode" value="N">
										<input type="hidden" name="h_cancelyn" value="Y">
										<span class="block">사용일자</span>
										2023-03-29 (수) 세션1 (10:00~13:00)
										<a href="#uiLayerPop_cancel" class="btnTbl" onclick="layerPopupOpen(this);roomInfoRsvCancelData('333245', '1987', '0', 'N', '440000', '2023-03-29', '2023-03-07', '180-800309834', 'Y');return false;">예약취소</a>
									</dt>
									<dd>
										<p>결제금액 : 440,000원</p>
										<p>상태 : 결제완료</p>
									</dd>
								</dl> -->
								<!-- E : 20230307 아카데미 예약 현황 확인 모바일 화면 수정으로 기존 마크업 삭제 -->
								<span name="snsText" style="display:none">
									<p>■ 분당ABC (교육장) 2023-03-29(수)|10:00 ~13:00|</p>
								</span>
							</div>

							<!-- @edit 160627 문구추가 -->
							<ul class="listDot brdTop">
								<li>예약취소 시 실제 카드승인취소는 한국암웨이에서 카드사로 승인취소를요청한 날로부터 3~5일 후에 이루어집니다.</li>
								<li>카드 승인취소여부와 정확한 환불일자는 해당카드사에서 확인하실 수 있습니다.</li>
							</ul>

							<div class="stepDone selcWrap">

								<div class="detailSns">
									<a href="#none" id="snsKt"
										onclick="javascript:tempSharing('http://aq.amway.co.kr/reservation/redirectUrl.do', 'kakaotalk');"
										title="새창열림"><img src="/_ui/mobile/images/common/btn_sns_ct.gif"
											alt="kakaotalk"></a>
									<a href="#none" id="snsKs"
										onclick="javascript:tempSharing('http://aq.amway.co.kr/reservation/redirectUrl.do', 'kakaostory');"
										title="새창열림"><img src="/_ui/mobile/images/common/btn_sns_cs.gif"
											alt="kakaostory"></a>
									<a href="#none" id="snsBd"
										onclick="javascript:tempSharing('http://aq.amway.co.kr/reservation/redirectUrl.do', 'band');"
										title="새창열림"><img src="/_ui/mobile/images/common/btn_sns_bd.gif" alt="band"></a>
									<a href="#none" id="snsFb"
										onclick="javascript:tempSharing('http://aq.amway.co.kr/reservation/simpleReservation.do', 'facebook');"
										title="새창열림"><img src="/_ui/mobile/images/common/btn_sns_fb.gif"
											alt="facebook"></a>
								</div>
								<span class="doneText">예약내역공유</span>

							</div>

							<div class="btnWrap aNumb1">
								<a href="/reservation/roomInfoList.do" class="btnBasicBL">예약현황확인</a>
							</div>

							<!-- //시설예약 현황확인
m02_050_layer 참조
<!-- layer popoup -->
							<!-- 예약취소 알림 -->
							<div class="pbLayerPopup" id="uiLayerPop_cancel" style="display: none;">
								<div class="pbLayerHeader">
									<strong>예약취소</strong>
								</div>
								<div class="pbLayerContent">
									<!-- 20160714 페널티 수정 -->
									<div class="cancelWrap">


									</div>

									<div class="stateWrap">
										<div class="titP mgtM">예약정보</div>
										<div class="topBox mgbS" id="popInfo">
											<dl>
												<dt>시설종류</dt>
												<dd id="t_RoomName">25센트라이드예약</dd>
												<dt>지역</dt>
												<dd id="t_PpName">강남ABC</dd>
												<dt>ROOM명</dt>
												<dd id="t_RsvName">온라인교육</dd>
											</dl>
										</div><!-- //.topBox -->

									</div>

									<div class="btnWrap-b">
										<span><a href="#none" class="btnBasicGL"
												onclick="javascript:cancelClosePop();">취소</a></span>
										<span><a href="#none" class="btnBasicBL" id="fn_roomInfoRsvCancel"
												onclick="javascript:roomInfoRsvCancel();">확인</a></span>
									</div>
								</div>

								<a href="#none" class="btnPopClose" onclick="javascript:cancelClosePop();"><img
										src="/_ui/mobile/images/common/btn_close.gif" alt="window close"></a>
							</div>

							<!-- 환불내역 확인 -->
							<div class="pbLayerPopup" id="uiLayerPop_cancelView" style="display: none;">
								<div class="pbLayerHeader">
									<strong>환불내역 확인</strong>
								</div>
								<div class="pbLayerContent">
									<h2>시설 예약</h2>
									<table class="tblCredit">
										<colgroup>
											<col width="110px">
											<col width="auto">
										</colgroup>
										<tbody>
											<tr>
												<th scope="row" class="bdTop">예약자</th>
												<td id="account" class="bdTop">7480003</td>
											</tr>
											<tr>
												<th scope="row">예약완료일자</th>
												<td id="paymentdate">2016-04-20</td>
											</tr>
											<tr>
												<th scope="row">사용예정일자</th>
												<td id="reservationDate">2016-05-31</td>
											</tr>
											<tr>
												<th scope="row">시설종류</th>
												<td id="typename"></td>
											</tr>
											<tr>
												<th scope="row">지역/시설명</th>
												<td id="ppname"></td>
											</tr>
											<tr>
												<th scope="row">사용예정시간</th>
												<td id="session">Session1 (14:00~17:00)</td>
											</tr>
										</tbody>
									</table>

									<h2 class="mgtL">결제 및 취소</h2>
									<table class="tblCredit">
										<colgroup>
											<col width="110px">
											<col width="auto">
										</colgroup>
										<tbody>
											<tr>
												<th scope="row" class="bdTop">취소일자</th>
												<td id="canceldatetime" class="bdTop">2016-4-20 11:12:10</td>
											</tr>
											<tr>
												<th scope="row">취소구분</th>
												<td></td>
											</tr>
											<tr>
												<th scope="row">취소형태</th>
												<td></td>
											</tr>
											<tr>
												<th scope="row">취소번호</th>
												<td id="virtualpurchasenumber">123456 </td>
											</tr>
											<tr>
												<th scope="row">환불방법</th>
												<td id="applytypevalue"></td>
											</tr>
											<tr>
												<th scope="row">결제금액</th>
												<td id="paymentamount">150,000</td>
											</tr>
											<tr>
												<th scope="row">취소수수료</th>
												<td id="refundcharge">15,000</td>
											</tr>
											<tr>
												<th scope="row">환불금액</th>
												<td id="refundamount">135,000</td>
											</tr>
										</tbody>
									</table>
									<div class="btnWrap bNumb1">
										<a href="#" class="btnBasicGL" onclick="javascript:cancelViewClosePop();">닫기</a>
									</div>
								</div>
								<a href="#none" class="btnPopClose" onclick="javascript:cancelViewClosePop();"><img
										src="/_ui/mobile/images/common/btn_close.gif" alt="window close"></a>
							</div>
							<!-- //환불내역 확인 -->
						</div>
					</div>
				</div>




				<a href="https://www.uat.amway.co.kr/business-center" class="btnPopClose"><img
						src="/_ui/mobile/images/common/new_close.png" alt="창 닫기"></a>


			</div>
		</section>
		<!-- //content -->
	</div>
	<!-- container -->

	<!-- //Adobe Analytics Footer 호출 include -->
	<script type="text/javascript">
		//<![CDATA[
		//Adobe_Analytics
		//    if(typeof dataLayer == 'undefined') {
		var dataLayer = {};
		//    }
		// site Info.
		dataLayer.site = {
			"isProduction": "false",
			"type": "mobile",
			"country": "kr",
			"language": "ko",
			"currencyCode": "krw",
			"region": "apac",
			"subRegion": "korea",
			"subGroup": "korea",
			"webProperty": "ecm"
		};
		// cos Info.
		dataLayer.visitor = {
			"customerID": "7480000",
			"imcID": "18000007480000",
			"pinNumber": "Founders Platinum",
			"userProfile": "abo"
		};
		// conn page Info.
		dataLayer.page = {
			"section": "비즈니스",
			"category": "시설예약",
			"subCategory": "시설예약현황확인",
			"detail": ""
		};

		if (typeof (_satellite) != "undefined") _satellite.pageBottom();
		// if (typeof (_satellite) != "undefined") _satellite.track('academy');
		//]]>
	</script>




</body>

</html>