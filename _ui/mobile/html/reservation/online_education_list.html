<!doctype html>
<html lang="ko">
<head>
	<!-- page common -->
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
	<meta http-equiv="Cache-Control" content="no-cache">
	<meta http-equiv="Pragma" content="no-cache">
	<meta name="referrer" content="unsafe-url" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<!-- //page common -->
	<!-- page unique -->
	<meta name="Description" content="설명들어감">
	<meta http-equiv="Last-Modified" content="">
	<meta id="metaTitle"   property="og:title">
	<meta id="metaUrl"     property="og:url">
	<meta id="metaContent" property="og:description">
	<meta id="metaImage"   property="og:image">

	<meta content="website" property="og:type">
	<meta content="Amway Site" property="og:site_name">
	<!-- //page unique -->
	<title>Amway Korea | 다이아몬드 온라인 교육신청</title>
	<!--[if lt IE 9]>
	<script src="/_ui/mobile/common/js/html5.js"></script>
	<script src="/_ui/mobile/common/js/ie.print.js"></script>
	<![endif]-->
	<script type="text/javascript" src="/ruxitagentjs_ICA27NVdefgijmoqrtuvx_10215210506134511.js" data-dtconfig="app=c91546c95c87690f|featureHash=ICA27NVdefgijmoqrtuvx|vcv=2|rdnt=1|uxrgce=1|bp=3|cuc=9rj8dgfh|mel=100000|dpvc=1|ssv=4|lastModification=1677726969186|dtVersion=10215210506134511|tp=500,50,0,1|uxdcw=1500|agentUri=/ruxitagentjs_ICA27NVdefgijmoqrtuvx_10215210506134511.js|reportUrl=/rb_bf49927etb|rid=RID_-33929695|rpid=-1659851040|domain=amway.co.kr"></script><link rel="stylesheet" href="/_ui/mobile/common/css/academy_default.css">
	<link rel="stylesheet" href="/_ui/mobile/common/css/default.css" />
	<link rel="stylesheet" href="/_ui/mobile/common/css/main.css" />
	<link rel="stylesheet" href="/_ui/mobile/common/css/swiper.min.css"> <!-- 20220830 css 추가 -->
	<link rel="stylesheet" href="/_ui/mobile/common/css/swiper-bundle.min.css"> <!-- 20220830 css 추가 -->
		
	<script src="/_ui/mobile/common/js/jquery-1.8.3.min.js"></script>	
	<script src="/_ui/mobile/common/js/pbLayerPopup.js"></script>
	<script src="/_ui/mobile/common/js/pbCommon.js"></script>
	
	<script type="text/javascript" charset="UTF-8" src="/js/front.js"></script>
	<script type="text/javascript" charset="UTF-8" src="/js/json2.js"></script>
	<script type="text/javascript" charset="UTF-8" src="/js/json3.js"></script>
    <script type="text/javascript" charset="UTF-8" src="/js/jquery.form.js"></script>
	<script type="text/javascript" charset="UTF-8" src="/js/jquery.number.min.js"></script>
	<script type="text/javascript" charset="UTF-8" src="/js/jquery.popupWindow.js"></script>
	<script type="text/javascript" charset="UTF-8" src="/js/date.format.js"></script>
	<script type="text/javascript" charset="UTF-8" src="/js/jquery.history.js"></script>
	
	<script src="/_ui/mobile/common/js/owl.carousel.js"></script>
	<script src="/_ui/mobile/common/js/apps/kakao.link.js"></script>
	<script src="https://developers.kakao.com/sdk/js/kakao.min.js"></script>
	<script src="/_ui/mobile/common/js/jquery.event.drag-1.5.min.js"></script>
	<script src="/_ui/mobile/common/js/jquery.touchSlider.js"></script>
	<script src="/_ui/mobile/common/js/jquery.touchSlider2.js"></script>
	<script src="/_ui/mobile/common/js/swiper.min.js"></script> <!-- 20220830 js 추가 -->
	
	<script src="/_ui/mobile/common/js/pbCommonAcademyReservationSecond.js"></script>
	<script src="/_ui/mobile/common/js/pbCommon.js"></script>	
	<script src="/_ui/mobile/common/js/reservationSns.js"></script>
	<script src="/_ui/mobile/common/js/reservation_tab.js"></script>
	<script src="https://js.tosspayments.com/v1/connectpay"></script>
	
	
	<script type="text/javascript" charset="UTF-8" src="/js/front_reservation.js"></script>	
	
	<script src="/js/mustache.min.js"></script>
	<script src="/js/stringUtility.js"></script>
	
	<script type="text/javascript">
		//window.utag_cfg_ovrd = {noview : true};
	</script>		
</head>


<style>
	input {height:31px;}
</style>

<script type="text/javascript">

	var browser;

	// 모바일 가로/세로 resize
	$(window).on("orientationchange", function(event){
//		setTimeout(function(){ abnkorea_resize(); }, 500);
	});
	
	// ap안내 아이프레임 높이 조정
	function abnkoreaApInfoPop_resize(){
		
		var tempHeight = 0;
					
		if($("#uiLayerPop_apInfo").height() > 900){
			tempHeight = 0;
		}else{
			tempHeight = 900 - $("#uiLayerPop_apInfo").height();
		}
		
				
		var iHeight = $("#uiLayerPop_apInfo").height() + tempHeight; //"1320"//
		
		var isResize = false;
		if(iHeight == null){
			iHeight = $(document).height();				
		}
		try
		{
			
			window.parent.postMessage(iHeight, "*");
			isResize = true;
			
			$("#layerMask").css("display", "none");			
		}
		catch(e){
			isResize = false;			
		}
		if(!isResize)
		{
			try{				
			}
			catch(e){				
			}
		}
				
	}
	
	// ap안내 아이프레임 높이 조정
	function abnkoreaConfirmPop_resize(){
		var iHeight = $("#pbContent").height() + 200;
		var isResize = false;
		if(iHeight == null){
			iHeight = $(document).height();
		}
		try
		{
			window.parent.postMessage(iHeight, "*");
			isResize = true;
		}
		catch(e){
			isResize = false;
		}
		if(!isResize)
		{
			try{
			}
			catch(e){
			}
		}
	}
	

	// 아이프레임 높이 조정
	function abnkoreaCard_resize()
	{
		var iHeight = $("#pbContent").height() + 200;
		var isResize = false;
		if(iHeight == null){
			iHeight = $(document).height();
		}
		try
		{
			window.parent.postMessage(iHeight, "*");
			isResize = true;
		}
		catch(e){
			isResize = false;
		}
		if(!isResize)
		{
			try{
			}
			catch(e){
			}
		}
	}
	
	// 아이프레임 높이 조정
	function rsvConfirmPop_resize(){	
		$("body").scrollTop(0);
		//alert($('#uiLayerPop_confirm').length);
		//$('#uiLayerPop_confirm').eq(0).scrollIntoView(true);
		$('#uiLayerPop_confirm').each(function(){				
			this.scrollIntoView(true);			
		});			
	}


</script>



<script type="text/javascript">
	var openLayerPopup = function(options){
		// 하나로 통일
		var targetId = "acdemyLayerPop";
		
		var default_value =  {	
			targetId : "acdemyLayerPop"
			, width : 850
			, height : 600
			, maxHeight : 600
			, callback : false
			, params : ""
			, level : "1"
		};
		
		var opts = $.extend({}, default_value, options);
		
		opts.width = parseFloat(opts.width);
		opts.height = parseFloat(opts.height);
		opts.height = opts.height > opts.maxHeight ? opts.maxHeight : opts.height;
			
		var xindex = "10001";
		
		// modal
		var parentDoc = $(document).find('body');
		parentDoc.append('<div class="layerMask" id="layerMask" style="display:block;"></div>');
		
		// 기존 Layer 삭제
		$("#" + targetId).remove();
		$(document).find("body").append('<div id="' + targetId + '" tabindex="-1"></div>');
		
		// Layer 레이아웃
		var obj = $(document).find('#'+ targetId);
		
		$.ajax({
			url: opts.url,
			type:'post',
			data : opts.params,
			success: function(data){
				// 열린 Ifrm ID 설정
				obj.html(data);
				$(window).scrollTop();
				setTimeout(function(){ $("#uiLayerPop_mTFDetail" ).attr("tabindex","0").focus(); }, 500);
				// 닫기 버튼 이벤트
				$(".btnPopClose").on("click", function(){
					$('#layerMask').remove();
					$('#acdemyLayerPop').remove();
				});
			},
			error: function(xhr,status,error){
				$('#layerMask').remove();
				$('#acdemyLayerPop').remove();
				alert("code:"+xhr.status);
			}
		});	
	};
	
</script>



<!-- //Adobe Analytics Header 호출 include -->


    
        <!-- analytics AI production (TBD) -->
        <script src="//assets.adobedtm.com/82aecb95e0b4e7a4cd5816c4c5d4fb1902bdbcf5/satelliteLib-a1be4b37db6eea7c35859ed88c870d1b39caf70d.js"></script>
    
    




<script type="text/javascript">
/* 뒤로가기 제어 */
History.pushState(null, null, location.href);
History.Adapter.bind(window,'statechange',function(){
	var state = History.getState();
	history.go(1);
});

$(document.body).ready(function(){
	
	$("#viewTypeCalendar").hide();
// 	$('#IframeComponent', parent.document).height(3000);
	setTimeout(function(){ abnkorea_resize(); }, 500);
	
	/* move function */
/*
	var $pos = $("#pbContent");
	var iframeTop = parent.$("#IframeComponent").offset().top
	parent.$('html, body').animate({
	    scrollTop:$pos.offset().top + iframeTop
	}, 500);
*/	
	$(".btnBasicBL").on("click", function(){
		
	});
	
	/* 캘린더 호출 */
	$(".calendar").click(function () {
		/* 캘린더 그리기 & 하단 예약 현황 상세 테이블 그리는 함수 호출 */
		calenderInfoAjax($("#year").val(), $("#month").val());
	});
	
	/* 년도 변경시 */
	$("#year").change(function () {
		calenderInfoAjax($("#year").val(), $("#month").val());
	});
	
	/* 월 변경시 */
	$("#month").change(function () {
		calenderInfoAjax($("#year").val(), $("#month").val());
	});
	
	$(".icolist").click(function () {
		setTimeout(function(){ abnkorea_resize(); }, 500);
	});
	
	var checkRoom ="";
	
				
		
		     checkRoom = checkRoom + "@@";			 
		
	
	
	console.log(checkRoom)
	if(checkRoom == "@@") {		
		$('input:checkbox[name="roomType"]').attr("checked",true);
	}
	
	
	$('input:checkbox[name="roomType"]').each(function() {		
	     if(checkRoom.indexOf(this.value) != -1){ //값 비교	
	            this.checked = true; //checked 처리		
	     }	
	 });
	
});

/* 달력 정보 조회 */
function calenderInfoAjax(year, month){
	var param = {
			  "year" : year
			, "month" : month
			
			/* 이전달, 현재달, 다음달 예약정보 카운트 조회 파라미터 */
			, "getYear" : year
			, "getMonth" : month
			, "rsvtypecode" : "R01"
		};
		
	$.ajax({
		url: "/reservation/roomCalenderInfoAjax.do"
		, type : "POST"
		, async : false
		, data: param
		, success: function(data, textStatus, jqXHR){
			
			/* 해당 월 달력 정보 */
			var calendar = data.roomCalendar;
			
			/* 오늘 날짜 정보 (yyyymmdd) */
			var today = data.roomToday;
			
			var reservationInfoList = data.roomReservationInfoList;
			
			var monthRsvCount = data.monthRsvCount;
			
			$("#viewTypeCalendar").show();
			
			/* 캘린더 상단 해당월의 총 예약 건수  */
			$(".topText").empty();
			$(".topText").append("총 <strong>"+monthRsvCount.thismonthcnt+"개</strong>의 시설예약 내역이 있습니다.");
			
			/* 달련 렌더링 */
			calenderRender(calendar, today, reservationInfoList);
			
		}, error: function( jqXHR, textStatus, errorThrown) {
			alert("처리도중 오류가 발생하였습니다.");
		}
	});
}

/* 달력 그리기 */


function calenderRender(calendar, today, reservationInfoList){
	
	var html = "";
	
	$(".tblBookCalendar tbody").empty();
	
	var cnt = 0;
	var selectYmd = "";
	
	var calRsvArray = new Array();
	var calRsvInfo = "";
	var calArray = new Array();
	var calInfo = "";
	var calHeadArray = new Array();
	var calHead = "";
	
	
	
	for(var num = 0; num < Math.ceil((calendar.length + (calendar[0].weekday - 1))/7); num++){
		calHead = new Object;
		calArray = new Array();
		
		for(var i = 0; i < 7; i++){
			calInfo = new Object;
			
			if(cnt == calendar.length){				
				calInfo.tmp_td = false;
				calArray.push(calInfo);
				continue;
			}
			if(calendar[cnt].weekday == (i+1+(num*7)) || cnt > 0){
				calInfo.tmp_td = true;
				if(calendar[cnt].ymd == today.ymd && $("#popDay").val() == ""){
					calInfo.tmp_class = true;						
					$("#popDay").val("");
					$("#popDay").val(calendar[cnt].day);
					selectYmd = calendar[cnt].ymd;
				}else if(calendar[cnt].day == $("#popDay").val()){
					calInfo.tmp_class = true;						
					$("#popDay").val("");
					$("#popDay").val(calendar[cnt].day);
					selectYmd = calendar[cnt].ymd;
				}
				else{
					calInfo.tmp_class = false;
				}
				
				calInfo.tmp_engweekday = calendar[cnt].engweekday;
				calInfo.tmp_ymd = calendar[cnt].ymd;
				calInfo.tmp_day = calendar[cnt].day;
				
				var tempTypeName = "";
				calRsvArray = new Array();
				
				for(var j in reservationInfoList){
					if(reservationInfoList[j].ymd == calendar[cnt].ymd
							&& reservationInfoList[j].paymentStatusCode != null
							&& reservationInfoList[j].paymentStatusCode != "P03"
							&& reservationInfoList[j].typename != tempTypeName){
						tempTypeName = reservationInfoList[j].typename;
						calRsvInfo = new Object;
						
						if(reservationInfoList[j].typeseq == "1"){							
							calRsvInfo.tmp_color = "blue";							
						}else if(reservationInfoList[j].typeseq == "2"){							
							calRsvInfo.tmp_color = "green";							
						}else if(reservationInfoList[j].typeseq == "3"){							
							calRsvInfo.tmp_color = "red";							
						}else if(reservationInfoList[j].typeseq == "8"){							
							calRsvInfo.tmp_color = "gray";	
						}else if(reservationInfoList[j].typeseq == "11"){							
							calRsvInfo.tmp_color = "purple";	
						}else {							
							calRsvInfo.tmp_color = "gray";	
						}
						calRsvArray.push(calRsvInfo);
					}
				}
				
				calInfo.tmp_colorArray  = calRsvArray ;
				cnt++;
			}else{
				calInfo.tmp_td = false;
			}
			
			calArray.push(calInfo);
		}
		
		calHead.tmp_head = calArray;
		calHeadArray.push(calHead);
	}
	
	var total_calInfo = new Object();
	total_calInfo.tmp_items = calHeadArray;	
		
	var template = $('#tmp_calender').html();			
	var rendered = Mustache.render(template, total_calInfo);
		
	
	$(".tblBookCalendar tbody").append(rendered);
	
	$("#viewTypeCalendar .stateWrap .tblBizroomState").empty();
	if(selectYmd != ""){
		roomDayReservationListAjax(selectYmd);
	}
	
	/* 예약 취소시 리턴 파라미터 선언 */
	$("#parentInfo").val("");
	$("#parentInfo").val("CAL");
	$("#popYear").val("");
	$("#popYear").val($("#year").val());
	$("#popMonth").val("");
	$("#popMonth").val($("#month").val());
	
	setTimeout(function(){ abnkorea_resize(); }, 500);
}

/* 기존 날짜 선택 리셋, 해당 날짜 선택 */
function dayCheckReset(obj, reservationDate) {
	
	$(".tblBookCalendar tbody").find("a").each(function () {
		$(this).removeClass("selcOn")
	});
	$(obj).find("a").addClass("selcOn");
	
	$("#popDay").val($(obj).find("a").prop("innerText"));
	
	roomDayReservationListAjax(reservationDate);
}

/* 예약 현황 특정 날짜 본인 예약 정보 조회 */
function roomDayReservationListAjax(reservationDate) {
	
	$.ajax({
		url: "/reservation/roomDayReservationListAjax.do"
		, type : "POST"
		, data: {"reservationDate" : reservationDate}
		, success: function(data, textStatus, jqXHR){
			
			var reservationList = data.roomReservationList;
			
			reservationRender(reservationList);
			
		}, error: function( jqXHR, textStatus, errorThrown) {
			alert("처리도중 오류가 발생하였습니다.");
		}
	});
}

/* 예약 현황 특정 년, 월 본인 예약 정보 조회 */
function roomMonthReservationListAjax() {
	
	$(".tblBookCalendar tbody").find("a").each(function () {
		$(this).removeClass("selcOn")
	});
	$("#popDay").val("");
	
	$.ajax({
		url: "/reservation/roomMonthReservationListAjax.do"
		, type : "POST"
		, data: {"year" : $("#year").val()
				, "month" : $("#month").val()}
		, success: function(data, textStatus, jqXHR){
			
			var reservationList = data.roomReservationList;
			
			reservationRender(reservationList);
			
		}, error: function( jqXHR, textStatus, errorThrown) {
			alert("처리도중 오류가 발생하였습니다.");
		}
	});
}

/* 해당 날짜 본인 전체 예약 정보  렌더링 */
function reservationRender(reservationList) {
	
	$("#viewTypeCalendar .stateWrap .tblBizroomState").empty();
	
	var html = "";
	
	if(reservationList.length == 0){
		html = "<dt>예약내역이 없습니다.</dt>";
	}else{
		for(var num in reservationList){
			
			var temp = "";
			
			if((reservationList[num].paymentstatuscode == 'P07'
					|| reservationList[num].paymentstatuscode == 'P01'
					|| reservationList[num].paymentstatuscode == 'P02')
					&& reservationList[num].gettoday != reservationList[num].reservationDate){
				temp = "<a href=\"#uiLayerPop_cancel\" class=\"btnTbl\" "
					+ "onclick=\"layerPopupOpen(this);roomInfoRsvCancelData('"
					+ reservationList[num].rsvseq+"', '"
					+reservationList[num].roomseq+"', '"
					+reservationList[num].standByNumber+"', '"
					+reservationList[num].typecode+"', '"
					+reservationList[num].paymentamount+"', '"
					+reservationList[num].reservationDate.substring(0, 4)
					+"-"+reservationList[num].reservationDate.substring(4, 6)
					+"-"+reservationList[num].reservationDate.substring(6, 8)
					+"', '"
					+reservationList[num].purchasedate+"', '"
					+reservationList[num].virtualpurchasenumber+"');return false;\">"
					+ "예약취소</a>";
			}
			
			html += "<dt><span class=\"block\">사용일자</span> "
				 +  reservationList[num].reservationDate.substring(0, 4)
				 +	"-"+reservationList[num].reservationDate.substring(4, 6)
				 +	"-"+reservationList[num].reservationDate.substring(6, 8)
				 +	"("+reservationList[num].weekname
				 +	")"+reservationList[num].sessionname
				 +  "("+reservationList[num].startDateTime.substring(0, 2)
				 +  ":"+reservationList[num].startDateTime.substring(2, 4)
				 +  "~"+reservationList[num].endDateTime.substring(0, 2)
				 +	":"+reservationList[num].endDateTime.substring(2, 4)
				 +	")"+temp
			     +  "<dd><p>"+reservationList[num].typename+" | "
			     +  reservationList[num].ppname+" - "
			     +  reservationList[num].roomname+"</p>"
				 +  "<p>상태 : "+reservationList[num].paymentname+"</p>"
				 +  "</dd>";
		}
	}
	
	$("#viewTypeCalendar .stateWrap .tblBizroomState").append(html);
	
	setTimeout(function(){ abnkorea_resize(); }, 500);
}

function setMonth(flag){
	var tempYear;
	var tempMonth;
	
	if(flag == "post"){
		if($("#month").val() == "12"){
			tempYear = Number($("#year").val())+1;
			tempMonth = "01";
			
			$("#year").val(tempYear);
			$("#month").val(tempMonth);
		}else if($("#month").val() != "12"){
			tempYear = $("#year").val();
			tempMonth = Number($("#month").val())+1;
			
			if(tempMonth < 10){
				tempMonth = "0"+tempMonth;
				$("#year").val(tempYear);
				$("#month").val(tempMonth);
			}else if(tempMonth >= 10){
				$("#year").val(tempYear);
				$("#month").val(tempMonth);
			}
		}
		
		
	}else if(flag == "pre"){
		if($("#month").val() == "01"){
			tempYear = Number($("#year").val())-1;
			tempMonth = "12";
			
			$("#year").val(tempYear);
			$("#month").val(tempMonth);
		}else if($("#month").val() != "01"){
			tempYear = $("#year").val();
			tempMonth = Number($("#month").val())-1;
			
			if(tempMonth < 10){
				tempMonth = "0"+tempMonth;
				$("#year").val(tempYear);
				$("#month").val(tempMonth);
			}else if(tempMonth >= 10){
				$("#year").val(tempYear);
				$("#month").val(tempMonth);
			}
		}
	}
	
	calenderInfoAjax($("#year").val(), $("#month").val());
}

//더보기 
function nextPage(){
	
	var urlVal = "/reservation/roomInfoMoreListAjax.do";
	
	var rowPerPageVal = $("#roomInfoForm > input[name='rowPerPage']").val();
	var totalCountVal = $("#roomInfoForm > input[name='totalCount']").val();
	var firstIndexVal = $("#roomInfoForm > input[name='firstIndex']").val();
	var totalPageVal = $("#roomInfoForm > input[name='totalPage']").val();
	var pageVal = $("#roomInfoForm > input[name='page']").val();	
	var nextPage = Number(pageVal) + 1;
	$("#roomInfoForm > input[name='page']").val(nextPage);
	if(nextPage >= totalPageVal){ $("#nextPage").hide(); }
	
	var searchRoomType = new Array();
	
	
	$("input[name=roomType]").each(function(){
		if($(this).is(":checked") == true) {
			searchRoomType.push($(this).val());
		} else {
			searchRoomType.push("99999");
		}
	});
	
	var params = {
		  page : nextPage
		, rowPerPage : rowPerPageVal
		, totalCount : totalCountVal
		, firstIndex : firstIndexVal
		, totalPage : totalPageVal
		, searchStrDateMobile : $("#searchStrDateMobile").val()
		, searchEndDateMobile : $("#searchEndDateMobile").val()
		, searchPpSeq : $("#ppCode option:selected").val()
		, searchRoomType : searchRoomType
	};
	
	$.ajaxCall({
   		url: urlVal
   		, data: params
   		, dataType: "html"
   		, success: function( data, textStatus, jqXHR){			
   			$("#rsvInfoTable").append($(data).filter("#rsvInfoTable").html());
   			setTimeout(function(){ abnkorea_resize(); }, 500);
   		}
   	});
}

//시설 예약 현황 목록 상세 보기
function roomInfoDetailList(fullpurchasedate, roomseq, virtualpurchasenumber, rsvseq,paytype){
	$("input[name = purchasedate]").val(fullpurchasedate);
	$("input[name = roomseq]").val(roomseq);
	$("input[name = virtualpurchasenumber]").val(virtualpurchasenumber);
	$("input[name = rsvseq]").val(rsvseq);
	$("input[name = paytype]").val(paytype);
	
	$("#roomInfoForm").attr("action", "/reservation/roomInfoDetailList.do");
	$("#roomInfoForm").submit();
}

//검색호출
function doSearch() {
	$("#roomInfoForm").find("input[name=searchStrDateMobile]").remove();
	$("#roomInfoForm").find("input[name=searchEndDateMobile]").remove();
	$("#roomInfoForm").find("input[name=searchPpSeq]").remove();
	$("#roomInfoForm").find("input[name=searchRoomType]").each(function(){
		$(this).remove();
	});
	$("#roomInfoForm").find("input[name=searchStrDateMobile]").remove();
	$("#roomInfoForm").append("<input type='hidden' name='searchStrDateMobile'  value='"+ $("#searchStrDateMobile").val() +"'>");
	$("#roomInfoForm").append("<input type='hidden' name='searchEndDateMobile'  value='"+ $("#searchEndDateMobile").val() +"'>");
	$("#roomInfoForm").append("<input type='hidden' name='searchPpSeq'  value='"+ $("#ppCode option:selected").val() +"'>");
	
	var cnt = 0;
	$("input[name=roomType]").each(function(){
		if($(this).is(":checked") == true) {
			$("#roomInfoForm").append("<input type='hidden' name='searchRoomType' value='"+$(this).val()+"'>");
			cnt++;
		} else {
			$("#roomInfoForm").append("<input type='hidden' name='searchRoomType'  value='99999'>");
		}
	});
	
	if(cnt != 0 || $("#ppCode").val() != "" || $("#ppCode").val() != null){
		$("input[name='page']").val("");
		$("input[name='page']").val("0");
		
		$("input[name='rowPerPage']").val("");
		
		$("input[name='totalCount']").val("");
		$("input[name='totalCount']").val("0");
	}
			
	$("#roomInfoForm").attr("action", "/reservation/roomInfoList.do");
	$("#roomInfoForm").submit();
}

//페이지 이동
function doPage(page) {
	$("#roomInfoForm > input[name='page']").val(page);  // 
	$("#roomInfoForm").submit();
}

/* 캘린더 취소 팝업 */
function roomInfoRsvCancelData(rsvseq, roomseq, standByNumber, typecode, paymentamount, reservationDate, purchasedate, virtualpurchasenumber){
	$("input[name = rsvseq]").val("");
	$("input[name = rsvseq]").val(rsvseq);
	
	$("input[name = roomseq]").val("");
	$("input[name = roomseq]").val(roomseq);
	
	$("input[name = standByNumber]").val("");
	$("input[name = standByNumber]").val(standByNumber);
	
	$("input[name = typecode]").val("");
	$("input[name = typecode]").val(typecode);
	
	var param = {
			  "rsvseq" : rsvseq
			, "roomseq" : roomseq
			, "standByNumber" : standByNumber
			, "typecode" : typecode
	}
	
	/* 해당 패널티 정보 조회 */
	$.ajaxCall({
		url: "/reservation/roomInfoRsvCancelPop.do"
		, type : "POST"
		, data: param
		, success: function(data, textStatus, jqXHR){
			var tempTypeCode = data.roomInfoRsvCancelPenalty.applytypevalue != null ? data.roomInfoRsvCancelPenalty.typecode : 'N';
			$("input[name = typecode]").val(tempTypeCode);
			$("input[name = paymentamount]").val(paymentamount);
			$("input[name = reservationDate]").val(reservationDate);
			$("input[name = purchasedate]").val(purchasedate);
			$("input[name = virtualpurchasenumber]").val(virtualpurchasenumber);

			var applytypevalue = data.roomInfoRsvCancelPenalty.applytypevalue;
			if(!isNull(applytypevalue)) {
				if(typecode == "P"){
					$("#typecodeP").show();
					$("#typecodeF").hide();
					$("#typecodeC").hide();
					$("#penaltyvalue").text(applytypevalue);
				} else if(typecode == "F"){
					$("#typecodeP").hide();
					$("#typecodeF").show();
					$("#typecodeC").hide();
				} else if(typecode == "C"){
					$("#typecodeP").hide();
					$("#typecodeF").hide();
					$("#typecodeC").show();
				} else {
					$("#typecodeP").hide();
					$("#typecodeF").hide();
					$("#typecodeC").hide();
				}
			} else {
				$("#typecodeP").hide();
				$("#typecodeF").hide();
				$("#typecodeC").hide();
			}
		},
		error: function( jqXHR, textStatus, errorThrown) {
			alert("처리도중 오류가 발생하였습니다.");
		}
	});
}

/* 예약 취소 */
function roomInfoRsvCancel(){
	var param = {
			  "rsvseq" : $("input[name=rsvseq]").val()
			, "roomseq" : $("input[name=roomseq]").val()
			, "standByNumber" : $("input[name=standByNumber]").val()
			, "typecode" : $("input[name=typecode]").val()
			, "paymentamount" : $("input[name=paymentamount]").val()
			, "reservationDate" : $("input[name=reservationDate]").val()
			, "purchasedate" : $("input[name=purchasedate]").val()
			, "virtualpurchasenumber" : $("input[name=virtualpurchasenumber]").val()
			, "interfaceChannel" : $("input[name=interfaceChannel]").val()
	}

	var year = "";
	var month = "";

	if($("input[name=reservationDate]").val() != "") {
		year = $("input[name=reservationDate]").val().substring(0, 4);
		month = $("input[name=reservationDate]").val().substring(5, 7);
	}
	
	$.ajax({
		url: "/reservation/updateRoomCancelCodeAjax.do"
		, type : "POST"
		, data: param
		, success: function(data, textStatus, jqXHR){
			
			if(data.errorMsg) {
				alert(data.errorMsg);					
			} else {	
				alert("예약이 취소되었습니다.");
			}
			
			/* 분기태워서 리프레쉬 */			
			calenderInfoAjax(year, month);
			
		},
		error: function( jqXHR, textStatus, errorThrown) {
			alert("처리도중 오류가 발생하였습니다.");
		}
	});
	cancelClosePop();
}

/* 캘린더 예약 취소 리턴 호출 함수 */
function viewTypeCalendar(popYear, popMonth, popDay) {
	$("#popDay").val(popDay);
	$("#year").val(popYear);
	$("#month").val(popMonth);
	
	calenderInfoAjax(popYear, popMonth);
}

/* 레이어 팝업 닫기 */
function cancelClosePop(){
	$("#uiLayerPop_cancel").hide();
	$("#layerMask").remove();
	 
	$('html, body').css({
		overflowX:'',
		overflowY:''
	});
}

/* 시설 <-> 체험 */
function accessParentPage(){
	var newUrl = "/reservation/expInfoList.do";
//	top.window.location.href="https://academy.amway.co.kr"+newUrl;
	top.window.location.href = newUrl;	
}

</script>
<form id="roomInfoForm" name="roomInfoForm" method="post">
	<input type="hidden" name="rowPerPage"  value="10" />
	<input type="hidden" name="totalCount"  value="7" />
	<input type="hidden" name="firstIndex"  value="1" />
	<input type="hidden" name="totalPage"  value="1" />
	<input type="hidden" name="page"  value="1" />
	
	
	<!-- 취소 팝업 에서 사용될 파라미터 -->
	<input type="hidden" name="interfaceChannel" value="WEB" >
	<input type="hidden" name="rsvseq">
	<input type="hidden" name="roomseq">
	<input type="hidden" name="standByNumber">
	<input type="hidden" name="typecode">
	<input type="hidden" name="paymentamount">
	<input type="hidden" name="purchasedate">
	<input type="hidden" name="reservationDate">
	<input type="hidden" name="virtualpurchasenumber">
	<input type="hidden" name="paytype">
	
<!-- 취소 팝업(부모창 호출시 필요) 에서 사용될 파라미터 -->
<!-- 	<input type="hidden" name="rsvseq"> -->
	<input type="hidden" id="parentInfo" name="parentInfo" value="">
	<input type="hidden" id="popYear" name="popYear" value="">
	<input type="hidden" id="popMonth" name="popMonth" value="">
	<input type="hidden" id="popDay" name="popDay" value="">
	
</form>
	<!-- container -->
	
	<!-- //container -->
<!-- 	<div class="skipNaviReturn"> -->

<body>
	<!-- S : 20230503 아카데미 그룹교육신청 작업 -->
	<div id="pbContainer">
		<!-- content -->
		<section id="pbContent" class="bizroom">
			<div class="pbLayerPopup new">
				<div class="pbLayerHeader">
					<strong>다이아몬드 온라인 교육신청</strong>
				</div>
				<div class="pbLayerContent">
					<!-- 상단 탭메뉴 -->
                    <div class="selcWrap mgbL">
                        <div class="selectArea sizeM colorW">
                            <a href="#">교육신청</a>
                            <a href="#" class="active2">교육신청 현황</a>
                        </div>
                    </div>

					<!-- 본문 -->
					<div class="tab-conts" id="business1" style="display:block;">
						<div>
							<div class="bizroomSwitchBox">
								<section class="wrapperListType" id="viewTypeList">
									<h2 class="hide">조회결과 - 리스트형</h2>
									<div class="topBox">
										<div class="mInputWrapper">
											<div class="inputWrap">
												<strong class="labelBlock">등록일자</strong>
												<div class="textBox">
													<div class="inputNum2">
														<span class="bgNone">
															<input type="date" title="등록일자 시작일" id="searchStrDateMobile" name="searchStrDateMobile" class="inputDate" value="2023-01-01">
														</span>
														<span>
															<input type="date" title="등록일자 종료일" id="searchEndDateMobile" name="searchEndDateMobile" class="inputDate" value="2023-03-31">
														</span>
													</div>
												</div>
											</div>
											<!-- S : 20230510 삭제 -->
											<!-- <div class="inputWrap">
												<strong class="labelBlock">브랜드 종류</strong>
												<div class="textBox">
													<div class="inputNum2 aklNew">
														<em><input type="checkbox" name="roomType" value="1"/><label for="room1">뉴트리라이트</label></em>
														<em><input type="checkbox" name="roomType" value="2"/><label for="room1">아티스트리</label></em>
														<em><input type="checkbox" name="roomType" value="3"/><label for="room1">퍼스널케어</label></em>
														<em><input type="checkbox" name="roomType" value="4"/><label for="room1">홈리빙</label></em>
													</div>
												</div>
											</div> -->
											<!-- E : 20230510 삭제 -->
											<div class="btnWrap">
												<a href="/reservation/roomInfoList.do" class="btnBasicGL">초기화</a>
												<a href="#none" class="btnBasicBL" onclick="javascript:doSearch();">조회</a>
											</div>
										</div>
									</div><!-- //.topBox -->

									<p class="totalMsg">총 <strong>7개</strong>의 등록내역이 있습니다.</p>

									<div class="stateWrap">
										<!-- @edit 160627 예약내역 없을 때 영역 추가  -->

										<!-- S : 20230302 아카데미 예약 현황 확인 모바일 화면 수정 -->
										<div class="tblBizroomState" id="rsvInfoTable">
											<div class="tblBizroomStateBox">
												<ul>
													<li>등록일자 : 2023-04-19 <em>|</em> 교육일자 : 2023-04-27</li>
													<li>교육명 : 뉴트리라이트_4월_글리코당 제품 교육</li><!-- 20230510 수정 -->
													<li>1건 신청 <em>|</em> 0건 대기 <em>|</em> 1건 취소</li>
												</ul>
												<a href="#none" class="btnTbl" onclick="javascript:roomInfoDetailList('1677591452921', '2528', '', '2247465', '');">상세보기</a>
											</div>
											<div class="tblBizroomStateBox">
												<ul>
													<li>등록일자 : 2023-04-19 <em>|</em> 교육일자 : 2023-04-20</li>
													<li>교육명 : 뉴트리라이트_마이크로바이옴 제품 교육</li><!-- 20230510 수정 -->
													<li>1건 신청 <em>|</em> 0건 대기 <em>|</em> 1건 취소</li>
												</ul>
												<a href="#none" class="btnTbl" onclick="javascript:roomInfoDetailList('1677587966213', '2528', '', '2247448', '');">상세보기</a>
											</div>
											<div class="tblBizroomStateBox">
												<ul>
													<li>등록일자 : 2023-04-17 <em>|</em> 교육일자 : 2023-04-20</li>
													<li>교육명 : 뉴트리라이트_XS에너지 제품 교육</li><!-- 20230510 수정 -->
													<li>1건 신청 <em>|</em> 0건 대기 <em>|</em> 1건 취소</li>
												</ul>
												<a href="#none" class="btnTbl" onclick="javascript:roomInfoDetailList('1677580836704', '2386', '', '2247411', '');">상세보기</a>
											</div>
											<div class="tblBizroomStateBox">
												<ul>
													<li>등록일자 : 2023-04-16 <em>|</em> 교육일자 : 2023-04-19</li>
													<li>교육명 : 아티스트리_아티스트리 제품 교육</li><!-- 20230510 수정 -->
													<li>1건 신청 <em>|</em> 0건 대기 <em>|</em> 1건 취소</li>
												</ul>
												<a href="#none" class="btnTbl" onclick="javascript:roomInfoDetailList('1677580836704', '2386', '', '2247411', '');">상세보기</a>
											</div>
										</div>
										<!-- E : 20230302 아카데미 예약 현황 확인 모바일 화면 수정 -->
									</div>
								</section>
								<section class="wrapperCalendarType" id="viewTypeCalendar" style="display:none;">
									<h2 class="hide">조회결과 - 캘린더형</h2>
									<div class="viewCalendar">
										<p class="topText">총 <strong>00개</strong>의 신청 내역이 있습니다.</p><!-- 20230510 수정 -->
										<div class="calendarWrapper">
											<div class="inputBox monthlyNum">
												<p class="selectBox">
													<select id="year" class="year" title="년도">
														<option value="2014">2014</option>
														<option value="2015">2015</option>
														<option value="2016">2016</option>
														<option value="2017">2017</option>
														<option value="2018">2018</option>
														<option value="2019">2019</option>
														<option value="2020">2020</option>
														<option value="2021">2021</option>
														<option value="2022">2022</option>
														<option value="2023" selected="selected">2023</option>
														<option value="2024">2024</option>
													</select>
													<select id="month" class="month" title="월">
														<option value="01">01</option>
														<option value="02">02</option>
														<option value="03" selected="selected">03</option>
														<option value="04">04</option>
														<option value="05">05</option>
														<option value="06">06</option>
														<option value="07">07</option>
														<option value="08">08</option>
														<option value="09">09</option>
														<option value="10">10</option>
														<option value="11">11</option>
														<option value="12">12</option>
													</select>
												</p>
												<a href="#" class="monthPrev" onclick="javascript:setMonth('pre');"><span class="hide">이전달</span></a><!-- 이전목록이 있으면 .on 활성화 -->
                								<a href="#" class="monthNext" onclick="javascript:setMonth('post');"><span class="hide">다음달</span></a><!-- 다음 목록이 있으면 .on 활성화 -->
											</div>
											<table class="tblBookCalendar">
												<caption>캘린더형 - 날짜별 신청 가능 시간</caption><!-- 20230510 수정 -->
												<colgroup>
													<col style="width:13.5%">
													<col style="width:14.5%" span="5">
													<col style="width:auto">
												</colgroup>
												<thead>									
													<tr>
														<th scope="col" class="weekSun">일</th>
														<th scope="col" class="weekMon">월</th>
														<th scope="col" class="weekTue">화</th>
														<th scope="col" class="weekWed">수</th>
														<th scope="col" class="weekThur">목</th>
														<th scope="col" class="weekFri">금</th>
														<th scope="col" class="weekSat">토</th>
													</tr>
												</thead>
												<tbody>
												</tbody>
											</table>
											<div class="tblCalendarBottom">								
												<div class="resrState"> 
													<span class="calIcon2 blue"></span>교육장
													<span class="calIcon2 green"></span>비즈룸
													<span class="calIcon2 red"></span>퀸룸/파티룸
													<span class="calIcon2 gray"></span>25센트라이드예약
													<span class="calIcon2 purple"></span>A-STATION 시설
												</div>
												<div class="btnR"> <a href="#none" class="btnTbl" onclick="javascript:roomMonthReservationListAjax();">월 예약 전체보기</a></div>
											</div>
										</div>
									</div>
									<div class="stateWrap">
										<dl class="tblBizroomState"></dl>
									</div>
								</section>
							</div>
							<!-- //시설예약 현황확인 -->

							<!-- layer popoup -->
							<!-- 예약취소 알림 -->
							<div class="pbLayerPopup" id="uiLayerPop_cancel">
								<div class="pbLayerHeader">
									<strong>신청취소</strong><!-- 20230510 수정 -->
								</div>
								<div class="pbLayerContent">
									<!-- 20160714 페널티 수정 -->
									<div class="cancelWrap">
										<p>신청을 취소하시겠습니까?</p><!-- 20230510 수정 -->
										<div class="lineBox msgBox" id="typecodeP" style="display:none">
											<p class="textC">취소 시 결제 금액의 <span id="penaltyvalue"></span>%의 취소 수수료</p>
										</div>
										<!-- 무료예약인 경우 -->
										<div class="lineBox msgBox" id="typecodeF" style="display:none">
											<p class="textC">취소 시 패널티가 적용됩니다.</p>
										</div>
										<!-- 요리명장 무료예약인 경우 -->
										<div class="lineBox msgBox" id="typecodeC" style="display:none">
											<p class="textC">취소 시 패널티가 적용됩니다.</p>							
										</div>
									</div>
									
									<div class="btnWrap aNumb2">
										<span><a href="#none" class="btnBasicGL" onclick="javascript:cancelClosePop();">취소</a></span>
										<span><a href="#none" class="btnBasicBL" onclick="javascript:roomInfoRsvCancel();">확인</a></span>
									</div>
								</div>
								
								<a href="#none" class="btnPopClose" onclick="javascript:cancelClosePop();"><img src="/_ui/mobile/images/common/btn_close.gif" alt="window close"></a>
							</div>
							<!-- //예약취소 알림 -->
							<!-- //layer popoup -->
						</div>
					</div>
				</div>
				<a href="https://www.amway.co.kr/business-center" class="btnPopClose"><img src="/_ui/mobile/images/common/new_close.png" alt="창 닫기"></a>
			</div>
		</section>
		<!-- //content -->
	</div>
	<!-- E : 20230503 아카데미 그룹교육신청 작업 -->
</body>

<script id="tmp_calender" type="x-tmpl-mustache">
	{{#tmp_items}}		
		<tr>
			{{#tmp_head}}			
				{{#tmp_td}}
					<td class="{{tmp_engweekday}}" onclick="javascript:dayCheckReset(this, '{{tmp_ymd}}');">
						<a href="#none" {{#tmp_class}}class="selcOn"{{/tmp_class}}>{{tmp_day}}
							<span>							
							{{#tmp_colorArray}}
								<em class="calIcon2 {{tmp_color}}">예약</em>	
							{{/tmp_colorArray}}
							</span>
						</a>
					</td>
				{{/tmp_td}}	
				{{^tmp_td}}
					<td></td>
				{{/tmp_td}}			
			{{/tmp_head}}	
		</tr>	
	{{/tmp_items}}	
</script>

<script type="text/javascript">
		var utag_data = {
				  site_type : "mobile", //	desktop / mobile 
				  site_country : "kr", //	kr ê³ ì 
				  site_language : "ko", //	ko ê³ ì 
				  site_subGroup : "korea", //	korea ê³ ì 
				  site_subRegion : "korea", //	korea ê³ ì 
				  site_region : "apac", //	apac ê³ ì 
				  site_webProperty : "ecm", //	ecm ê³ ì 
				  site_currencyCode : "krw",  //
				  
				  page_section : "비즈니스", //	home
				  page_category : "시설예약", //	
				  page_subCategory : "시설예약현황확인", //	
				  page_detail : "",  
				  
				  // ABO ì¸ ê²½ì°
				  visitor_imcID: "18000007480000",  
				  visitor_pinNumber: "Diamond", //this can be a descriptive value (e.g., platinum, silver_producer, diamond, etc.)
				  visitor_userProfile: "abo", 

				  // Member ì¸ ê²½ì°
				  visitor_customerID: "", //if the user is a non-abo customer or client
				  visitor_userProfile: "abo",  
				}
		var urlaccess = "OPER";
		
		if (urlaccess == "OPER") {
			//send tagging information
			(function(a,b,c,d){
			a='//tags.tiqcdn.com/utag/amway/kr-hybris/prod/utag.js'; // ê°ë°/QA íê²½ì¸ ê²½ì°
		    b=document;c='script';d=b.createElement(c);d.src=a;d.type='text/java'+c;d.async=true;
		    a=b.getElementsByTagName(c)[0];a.parentNode.insertBefore(d,a);
		})();
		}
		else{
			//send tagging information
			(function(a,b,c,d){
				a='//tags.tiqcdn.com/utag/amway/kr-hybris/dev/utag.js'; // ê°ë°/QA íê²½ì¸ ê²½ì°
			    b=document;c='script';d=b.createElement(c);d.src=a;d.type='text/java'+c;d.async=true;
			    a=b.getElementsByTagName(c)[0];a.parentNode.insertBefore(d,a);
			})();			
		}
</script>
</html>